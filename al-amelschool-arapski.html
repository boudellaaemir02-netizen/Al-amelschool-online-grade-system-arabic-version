<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>نظام التقييم - مدرسة العمل</title>
  <style>
    body { font-family: sans-serif; background:#f5f5f5; margin:0; padding:20px; }
    .card { background:white; padding:20px; border-radius:12px; max-width:600px; margin:20px auto; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
    input, select, textarea { width:100%; padding:10px; margin:8px 0; border-radius:8px; border:1px solid #ccc; }
    button { padding:10px 20px; border:none; background:#3a57e8; color:white; border-radius:8px; cursor:pointer; }
    button:hover { opacity:0.9; }
  </style>
</head>
<body>

<div class="card" id="login-card">
  <h2>تسجيل الدخول</h2>
  <select id="role">
    <option value="teacher">مُعلم</option>
    <option value="parent">ولي أمر</option>
  </select>
  <input id="user" placeholder="اسم المستخدم" />
  <input id="pass" placeholder="كلمة المرور" type="password" />
  <button onclick="login()">دخول</button>
</div>

<div class="card" id="teacher-panel" style="display:none;">
  <h2>لوحة المعلم</h2>
  <select id="student-select"></select>
  <select id="subject">
    <option>الرياضيات</option>
    <option>اللغة العربية</option>
    <option>العلوم</option>
    <option>الفيزياء</option>
    <option>الكيمياء</option>
    <option>الأحياء</option>
    <option>التاريخ</option>
    <option>الجغرافيا</option>
    <option>الإنجليزية</option>
    <option>القرآن الكريم</option>
  </select>
  <input id="grade" placeholder="العلامة" />
  <textarea id="note" placeholder="ملاحظة حول الطالب"></textarea>
  <button onclick="saveData()">حفظ</button>
</div>

<div class="card" id="parent-panel" style="display:none;">
  <h2>عرض تقييم الطالب</h2>
  <div id="parent-output"></div>
</div>

<script>
const logins = {
  teacher: { username: "teacher", password: "1234" },
  parents: {
    "ali": "1111",
    "sara": "2222",
    "mohammed": "3333"
  }
};

let selectedParent = "";
let students = ["ali", "sara", "mohammed"];
document.getElementById("student-select").innerHTML = students.map(s => `<option>${s}</option>`).join("");

function login() {
  const role = document.getElementById("role").value;
  const u = document.getElementById("user").value;
  const p = document.getElementById("pass").value;

  if (role === "teacher") {
    if (u === logins.teacher.username && p === logins.teacher.password) {
      document.getElementById("login-card").style.display = "none";
      document.getElementById("teacher-panel").style.display = "block";
    } else alert("خطأ في تسجيل الدخول!");
    return;
  }

  if (role === "parent") {
    if (logins.parents[u] === p) {
      selectedParent = u;
      document.getElementById("login-card").style.display = "none";
      document.getElementById("parent-panel").style.display = "block";
      loadParentData();
    } else alert("بيانات الدخول غير صحيحة!");
  }
}

function saveData() {
  const student = document.getElementById("student-select").value;
  const subject = document.getElementById("subject").value;
  const grade = document.getElementById("grade").value;
  const note = document.getElementById("note").value;

  let data = JSON.parse(localStorage.getItem(student) || "[]");
  data.push({ subject, grade, note });
  localStorage.setItem(student, JSON.stringify(data));
  alert("تم حفظ البيانات!");
}

function loadParentData() {
  let data = JSON.parse(localStorage.getItem(selectedParent) || "[]");
  let box = document.getElementById("parent-output");

  if (data.length === 0) {
    box.innerHTML = "لا توجد بيانات بعد";
    return;
  }

  box.innerHTML = data.map(d => `
    <div style='margin-bottom:10px; padding:10px; background:#eef;'>
      <strong>المادة:</strong> ${d.subject}<br>
      <strong>العلامة:</strong> ${d.grade}<br>
      <strong>ملاحظة:</strong> ${d.note}
    </div>`
  ).join("");
}
</script>

</body>
</html>
